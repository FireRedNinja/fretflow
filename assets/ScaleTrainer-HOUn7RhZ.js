import{r as a,j as e}from"./index-DNOtO4WB.js";import{F as $}from"./Fretboard-BdrLPhB4.js";import{N as b,S as p,g as A}from"./musicUtils-Bffn_pRB.js";import{g as F,I as T}from"./intervalUtils-bYTG8tbd.js";const h={major:{name:"Major Scale",intervals:["P1","M2","M3","P4","P5","M6","M7"]},naturalMinor:{name:"Natural Minor Scale",intervals:["P1","M2","m3","P4","P5","m6","m7"]},harmonicMinor:{name:"Harmonic Minor Scale",intervals:["P1","M2","m3","P4","P5","m6","M7"]},melodicMinorAsc:{name:"Melodic Minor (Ascending)",intervals:["P1","M2","m3","P4","P5","M6","M7"]},majorPentatonic:{name:"Major Pentatonic Scale",intervals:["P1","M2","M3","P5","M6"]},minorPentatonic:{name:"Minor Pentatonic Scale",intervals:["P1","m3","P4","P5","m7"]},blues:{name:"Blues Scale",intervals:["P1","m3","P4","TT","P5","m7"]}},E=(l,d)=>{const c=l.toUpperCase();if(b.indexOf(c)===-1)return console.error(`Invalid root note for scale: ${l}`),null;const s=[];for(const i of d.intervals){const r=T[i];if(!r)return console.error(`Invalid interval key '${i}' in scale formula '${d.name}'`),null;const m=F(c,r);if(m)s.push(m);else return console.error(`Failed to calculate note for interval ${i} from root ${l}`),null}return s},L=()=>{var S;const[l,d]=a.useState([]),[c,o]=a.useState(""),[s,i]=a.useState({rootNote:"A",scaleKey:"naturalMinor"}),[r,m]=a.useState(s),f=a.useMemo(()=>p.slice().reverse(),[]),N=12,v=a.useCallback(()=>{const t=h[s.scaleKey];if(!t)return o(`Invalid scale selected: ${s.scaleKey}`),[];const n=E(s.rootNote,t);if(!n)return o(`Could not calculate notes for ${s.rootNote} ${t.name}.`),[];const y=[],I=new Set(n);for(let u=0;u<f.length;u++)for(let x=0;x<=N;x++){const w=p.length-1-u,g=A(p[w],x);if(g&&I.has(g)){const C=g===s.rootNote;y.push({string:u,fret:x,label:g,color:C?"bg-red-500":"bg-blue-400"})}}return y},[s,f]),j=t=>{m(n=>({...n,rootNote:t.target.value})),o("")},M=t=>{m(n=>({...n,scaleKey:t.target.value})),o("")},P=()=>{if(!b.includes(r.rootNote)){o("Invalid root note selected.");return}if(!h[r.scaleKey]){o("Invalid scale selected.");return}i(r),o("")};return a.useEffect(()=>{d(v())},[s,v]),e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Scale Visualizer"}),e.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg mb-6 shadow p-4 space-y-4 md:space-y-0 md:flex md:justify-between md:items-center",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scale-root-note",className:"block text-sm font-medium text-gray-700 mb-1",children:"Root Note:"}),e.jsx("select",{id:"scale-root-note",value:r.rootNote,onChange:j,className:"p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500 shadow-sm text-sm",children:b.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scale-type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Scale:"}),e.jsx("select",{id:"scale-type",value:r.scaleKey,onChange:M,className:"p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500 shadow-sm text-sm",children:Object.entries(h).map(([t,n])=>e.jsx("option",{value:t,children:n.name},t))})]})]}),e.jsxs("div",{className:"text-right space-y-1 md:space-y-0 md:flex md:items-center md:space-x-3",children:[c&&e.jsx("p",{className:"text-red-600 text-sm text-left md:text-right",children:c}),e.jsx("button",{onClick:P,className:"py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-150 ease-in-out shadow text-sm font-medium",children:"Show Scale"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow min-h-[200px]",children:[e.jsx("p",{className:"text-lg font-semibold mb-3 text-gray-700",children:`${s.rootNote} ${((S=h[s.scaleKey])==null?void 0:S.name)||"Scale"}`}),e.jsx($,{highlightedNotes:l,fretCount:N,tuning:f})]})]})};export{L as default};
